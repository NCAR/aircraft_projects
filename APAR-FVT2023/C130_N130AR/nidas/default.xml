<?xml version="1.0" encoding="ISO-8859-1" standalone="no" ?>

<!-- Copyright 2005 UCAR, NCAR, All Rights Reserved -->
<project
        xmlns="http://www.eol.ucar.edu/nidas"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        name="Lab_Project"
        system="Lab_N600"
        >

<!-- sensor_catalog.xml must be in same directory, and is necessary to import
because it provides the definitions of the sensors -->
<xi:include href="sensor_catalog.xml" parse="xml"/>

  <site applyCals="true" class="raf.Aircraft" name="C130_N130AR">
    <parameter name="tailNumber" type="string" value="N130AR"/>
    <server statusAddr="sock:127.0.0.1:30001">
        <service class="XMLConfigService">
            <output>
                <socket type="mcaccept"/>
            </output>
        </service>
        <service class="XMLConfigAllService">
            <output>
                <socket type="mcaccept"/>
            </output>
        </service>
        <service class="RawSampleService" priority="RT_FIFO:50" procHeapMax="500M" procSorterLength="1.0" rawHeapMax="100M" rawSorterLength="0.0">

<!-- 
                 input from every DSM on this aircraft that has
                 a socket output of type RawSampleOutputStream 
            -->
            <input class="RawSampleInputStream">
                <socket maxIdle="60" type="mcaccept"/>
            </input>
            <processor class="SampleArchiver">
                <output class="RawSampleOutputStream">
                    <fileset dir="/var/r1/${PROJECT}" file="%Y%m%d_%H%M%S_${FLIGHT}.ads" length="0"/>
                </output>
                <output class="RawSampleOutputStream">
                    <fileset dir="/var/r2/${PROJECT}" file="%Y%m%d_%H%M%S_${FLIGHT}.ads" length="0"/>
                </output>

<!--
                Setup for outputing raw data to the compact flash on a dsm
                <output class="RawSampleOutputStream">
                    <fileset dir="/media/disk/projects/${PROJECT}"
                        file="%Y%m%d_%H%M%S_${FLIGHT}.ads"
                        length="0"/>
                </output>
		-->
                <output class="RawSampleOutputStream">
                    <socket port="30000" type="server"/>
                </output>
            </processor>
            <processor class="raf.SyncRecordGenerator">
                <output class="SampleOutputStream">
                    <socket port="30001" type="server"/>
                </output>
            </processor>
        </service>
    </server>

<!-- 
         ########################################################################################################### 
         ############################################### C-130 DSMs  ############################################### 
         ########################################################################################################### 
-->
    <dsm id="99" location="acserver" name="acserver" rserialPort="30002" statusAddr="sock:192.168.84.2:30001">
      <output class="RawSampleOutputStream">
        <socket type="mcrequest"/>
      </output>
    </dsm>

    <dsm id="10" name="dsm310" location="FVT Ramp Rack" statusAddr="sock:192.168.84.2:30001">
        <sensor IDREF="CHRONY_TRACKING_LOG" id="105" suffix="_310"/>
        <serialSensor IDREF="DSMTEMP_MBRTU" devicename="/dev/ttyS2" id="400" suffix="_310"/>
        <sensor class="DSC_A2DSensor" devicename="/dev/dmmat_a2d0" id="100" latency="0.25">
            <parameter name="rate" type="int" value="10000"/>
            <sample id="1" rate="2000">
                <parameter name="filter" type="string" value="boxcar"/>
                <parameter name="numpoints" type="int" value="5"/>

                <variable name="ACCELX_RS" units="G"> <!-- Right, Secondary, 4030-006 A434951 -->
                    <parameter name="channel" type="int" value="0"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A434951x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9666"/>
                    <parameter name="corIntercept" type="float" value="-7.5004"/>
-->
                </variable>
                <variable name="ACCELY_RS" units="G">
                    <parameter name="channel" type="int" value="1"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A434951y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9709"/>
                    <parameter name="corIntercept" type="float" value="-7.4944"/>
-->
                </variable>
                <variable name="ACCELZ_RS" units="G">
                    <parameter name="channel" type="int" value="2"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A434951z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9616"/>
                    <parameter name="corIntercept" type="float" value="-7.5222"/>
-->
                </variable>
                <variable name="ACCEL0_RS" units="V">
                    <parameter name="channel" type="int" value="3"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>

                <variable name="ACCELX_LS" units="G"> <!-- Left, Secondary, 4030-006 A435002 -->
                    <parameter name="channel" type="int" value="4"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A435002x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="3.0205"/>
                    <parameter name="corIntercept" type="float" value="-7.6536"/>
-->
                </variable>
                <variable name="ACCELY_LS" units="G">
                    <parameter name="channel" type="int" value="5"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A435002y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9683"/>
                    <parameter name="corIntercept" type="float" value="-7.4189"/>
-->
                </variable>
                <variable name="ACCELZ_LS" units="G">
                    <parameter name="channel" type="int" value="6"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A435002z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9940"/>
                    <parameter name="corIntercept" type="float" value="-7.5107"/>
-->
                </variable>
                <variable name="ACCEL0_LS" units="V">
                    <parameter name="channel" type="int" value="7"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>

                <variable name="ACCELX_BS" units="G"> <!-- Bottom, Secondary, 4030-006 A509729 -->
                    <parameter name="channel" type="int" value="8"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A509729x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9812"/>
                    <parameter name="corIntercept" type="float" value="-7.4293"/>
-->
                </variable>
                <variable name="ACCELY_BS" units="G">
                    <parameter name="channel" type="int" value="9"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A509729y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="2.9964"/>
                    <parameter name="corIntercept" type="float" value="-7.4420"/>
-->
                </variable>
                <variable name="ACCELZ_BS" units="G">
                    <parameter name="channel" type="int" value="10"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                    <poly units="G">
                        <calfile file="A509729z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
                    </poly>
<!--
                    <parameter name="corSlope" type="float" value="3.0692"/>
                    <parameter name="corIntercept" type="float" value="-7.6844"/>
-->
                </variable>
                <variable name="ACCEL0_BS" units="V">
                    <parameter name="channel" type="int" value="11"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>
            </sample>
        </sensor>
        <output class="RawSampleOutputStream">
            <socket type="mcrequest"/>
        </output>
    </dsm>

    <dsm id="16" name="dsm316" location="FVT Ramp Rack" statusAddr="sock:192.168.84.2:30001">
        <sensor IDREF="CHRONY_TRACKING_LOG" id="105" suffix="_316"/>
        <serialSensor IDREF="DSMTEMP_MBRTU" devicename="/dev/ttyS2" id="400" suffix="_316"/>
        <sensor class="DSC_A2DSensor" devicename="/dev/dmmat_a2d0" id="100" latency="0.25">
            <parameter name="rate" type="int" value="10000"/>
            <sample id="1" rate="2000">
                <parameter name="filter" type="string" value="boxcar"/>
                <parameter name="numpoints" type="int" value="5"/>

                <variable name="ACCELX_RP" units="G"> <!-- Right, Primary, 4630-020 C004065 -->
                    <parameter name="channel" type="int" value="0"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004065x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0634"/>
                    <parameter name="corIntercept" type="float" value="-0.1614"/>
                </variable>
                <variable name="ACCELY_RP" units="G">
                    <parameter name="channel" type="int" value="1"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004065y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="9.9701"/>
                    <parameter name="corIntercept" type="float" value="-0.0095"/>
                </variable>
                <variable name="ACCELZ_RP" units="G">
                    <parameter name="channel" type="int" value="2"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004065z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.1010"/>
                    <parameter name="corIntercept" type="float" value="-0.0619"/>
                </variable>
                <variable name="ACCEL0_RP" units="V">
                    <parameter name="channel" type="int" value="3"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>

                <variable name="ACCELX_LP" units="G"> <!-- Left, Primary, 4630-020 C004704 -->
                    <parameter name="channel" type="int" value="4"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004704x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="9.9900"/>
                    <parameter name="corIntercept" type="float" value="-0.1059"/>
                </variable>
                <variable name="ACCELY_LP" units="G">
                    <parameter name="channel" type="int" value="5"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004704y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0020"/>
                    <parameter name="corIntercept" type="float" value="-0.0032"/>
                </variable>
                <variable name="ACCELZ_LP" units="G">
                    <parameter name="channel" type="int" value="6"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004704z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0130"/>
                    <parameter name="corIntercept" type="float" value="-0.0315"/>
                </variable>
                <variable name="ACCEL0_LP" units="V">
                    <parameter name="channel" type="int" value="7"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>

                <variable name="ACCELX_BP" units="G"> <!-- Bottom, Primary, 4630-020 C004708 -->
                    <parameter name="channel" type="int" value="8"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004708x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0351"/>
                    <parameter name="corIntercept" type="float" value="-0.0020"/>
                </variable>
                <variable name="ACCELY_BP" units="G">
                    <parameter name="channel" type="int" value="9"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004708y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0040"/>
                    <parameter name="corIntercept" type="float" value="-0.0221"/>
                </variable>
                <variable name="ACCELZ_BP" units="G">
                    <parameter name="channel" type="int" value="10"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
<!--
                    <poly units="G">
                        <calfile file="C004708z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
                    </poly>
-->
                    <parameter name="corSlope" type="float" value="10.0533"/>
                    <parameter name="corIntercept" type="float" value="-0.1112"/>
                </variable>
                <variable name="ACCEL0_BP" units="V">
                    <parameter name="channel" type="int" value="11"/>
                    <parameter name="gain" type="float" value="1"/>
                    <parameter name="bipolar" type="bool" value="true"/>
                </variable>
            </sample>
        </sensor>
        <output class="RawSampleOutputStream">
            <socket type="mcrequest"/>
        </output>
        </dsm>

    <dsm derivedData="sock::7071" id="22" location="Forward R1 Rack" name="dsm322" rserialPort="30002" statusAddr="sock::30001">
      <sensor IDREF="CHRONY_TRACKING_LOG" id="105" suffix="_322"/>

      <!-- /dev/ttys[0-3] connect to serial ports that are native to the CPU card -->
      <serialSensor IDREF="DSMTEMP_MBRTU" devicename="/dev/ttyS2" id="400" suffix="_322"/>

      <sensor class="DSC_A2DSensor" devicename="/dev/dmmat_a2d0" id="100" latency="0.25">
        <parameter name="rate" type="int" value="10000"/>
        <!--parameter name="SerialNumber" type="string" value="W543482"/-->
        <!--calfile file="A2DW543482.dat" path="${PROJ_DIR}/Configuration/cal_files/A2D/DMMAT"/-->
        <sample id="1" rate="2000">
          <parameter name="filter" type="string" value="boxcar"/>
          <parameter name="numpts" type="int" value="5"/>

          <variable name="ACCELX_TP" units="G"> <!-- Top, Primary, 4630-020 C004709 -->
              <parameter name="channel" type="int" value="0"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                  <calfile file="C004709x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="10.0030"/>
              <parameter name="corIntercept" type="float" value="-0.0754"/>
         </variable>
         <variable name="ACCELY_TP" units="G">
              <parameter name="channel" type="int" value="1"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                 <calfile file="C004709y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="10.0210"/>
              <parameter name="corIntercept" type="float" value="0.0365"/>
          </variable>
          <variable name="ACCELZ_TP" units="G">
              <parameter name="channel" type="int" value="2"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                  <calfile file="C004709z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4630:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4630"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="10.0080"/>
              <parameter name="corIntercept" type="float" value="0.0159"/>
          </variable>
          <variable name="ACCEL0_TP" units="V">
              <parameter name="channel" type="int" value="3"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
          </variable>

          <variable name="ACCELX_TS" units="G"> <!-- Top, Secondary, 4030-006 A509731 -->
              <parameter name="channel" type="int" value="4"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                  <calfile file="A509731x.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="3.0119"/>
              <parameter name="corIntercept" type="float" value="-7.5986"/>
          </variable>
          <variable name="ACCELY_TS" units="G">
              <parameter name="channel" type="int" value="5"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                  <calfile file="A509731y.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="3.0187"/>
              <parameter name="corIntercept" type="float" value="-7.5883"/>
          </variable>
          <variable name="ACCELZ_TS" units="G">
              <parameter name="channel" type="int" value="6"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
<!--
              <poly units="G">
                  <calfile file="A509731z.dat" path="${TMP_PROJ_DIR}/Configuration/cal_files/Instruments/TE4030:${PROJ_DIR}/Configuration/cal_files/Instruments/TE4030"/>
              </poly>
-->
              <parameter name="corSlope" type="float" value="2.9742"/>
              <parameter name="corIntercept" type="float" value="-7.4800"/>
          </variable>
          <variable name="ACCEL0_TS" units="V">
              <parameter name="channel" type="int" value="7"/>
              <parameter name="gain" type="float" value="1"/>
              <parameter name="bipolar" type="bool" value="true"/>
          </variable>
        </sample>
      </sensor>

      <output class="RawSampleOutputStream">
        <socket type="mcrequest"/>
      </output>
    </dsm>


  </site>
</project>
