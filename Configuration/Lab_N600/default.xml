<?xml version="1.0" encoding="ISO-8859-1" standalone="no" ?>

<!-- Copyright 2005 UCAR, NCAR, All Rights Reserved -->
<project 
	xmlns="http://www.eol.ucar.edu/nidas" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:xi="http://www.w3.org/2001/XInclude"
	name="Lab_Project" 
	system="Lab_N600" 
	version="$LastChangedRevision: 2514 $" 
	>	
<!-- sensor_catalog.xml must be in same directory, and is necessary to import
because it provides the definitions of the sensors -->
  <xi:include href="sensor_catalog.xml" parse="xml"/>

  <site class="raf.Aircraft" name="Lab_N600" applyCals="true">
    <parameter name="tailNumber" type="string" value="N600"/>
    <server statusAddr="sock:127.0.0.1:30001">
      <service class="XMLConfigService">
        <output>
          <socket type="mcaccept"/>
        </output>
      </service>
      <service class="XMLConfigAllService">
        <output>
          <socket type="mcaccept"/>
        </output>
      </service>
      <service class="RawSampleService" priority="RT_FIFO:50" procHeapMax="500M" procSorterLength="1.0" rawHeapMax="100M" rawSorterLength="0.0">

<!-- input from every DSM on this aircraft that has
             a socket output of type RawSampleOutputStream -->
        <input class="RawSampleInputStream">
          <socket maxIdle="60" type="mcaccept"/>
        </input>
        <processor class="SampleArchiver">
          <output class="RawSampleOutputStream">
            <fileset dir="/var/r1/${PROJECT}" file="%Y%m%d_%H%M%S_${FLIGHT}.ads" length="0"/>
          </output>
          <output class="RawSampleOutputStream">
            <fileset dir="/var/r2/${PROJECT}" file="%Y%m%d_%H%M%S_${FLIGHT}.ads.bz2" length="0"/>
          </output>
          <output class="RawSampleOutputStream">
            <socket port="30000" type="server"/>
          </output>
        </processor>
        <processor class="raf.SyncRecordGenerator">
          <output class="SampleOutputStream">
            <socket port="30001" type="server"/>
          </output>
        </processor>
      </service>
    </server>
    <dsm id="99" location="acserver" name="acserver" statusAddr="sock:192.168.84.2:30001">
      <sensor IDREF="PARCELS" devicename="inet::30100" id="100"/>
      <output class="RawSampleOutputStream">
        <socket type="mcrequest"/>
      </output>
    </dsm>
    <dsm derivedData="sock::7071" id="109" location="lab" name="LabDSM9" rserialPort="30002" statusAddr="sock::30001">
      <sensor IDREF="IRIG" devicename="/dev/irig0" id="100" suffix="_303"/>
      <output class="RawSampleOutputStream">
        <socket type="mcrequest"/>
      </output>
    </dsm>
  </site>
</project>
